@model UHSB_Bagalkot.WebService.ViewModels.AdminDashboardVM
@{
    ViewData["Title"] = "Farmer Dashboard";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />

<div class="container mt-5">
  


    <!-- University Info Section -->
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h4 class="fw-bold text-success ">ತೋಟಗಾರಿಕೆ ವಿಜ್ಞಾನಗಳ ವಿಶ್ವವಿದ್ಯಾಲಯ, ಬಾಗಲಕೋಟ </h4>
        <div>
            <i class="fa-solid fa-user me-2"></i>
            <span id="userNameDisplay">Guest</span> |
            <i class="fa-solid fa-phone ms-2 me-1"></i>
            <span id="phoneDisplay">N/A</span>

            <!-- Admin Dashboard Button -->
            <a href="@Url.Action("ManageAdminDashboard", "Dashboard")"
               class="btn btn-sm btn-outline-primary ms-3">
                Manage Admin Dashboard
            </a>
        </div>
    </div>


    

    <!-- Summary Cards -->
    <div class="row g-3 mb-5">
        <div class="col-md-2 col-6">
            <div class="card text-center shadow-sm border-primary">
                <div class="card-body">
                    <i class="fa-solid fa-users fa-2x text-primary mb-2"></i>
                    <h6 class="card-title">Total Users</h6>
                    <p class="card-text fs-5 fw-bold">@Model.Summary?.TotalUsers</p>
                </div>
            </div>
        </div>
        <div class="col-md-2 col-6">
            <div class="card text-center shadow-sm border-success">
                <div class="card-body">
                    <i class="fa-solid fa-user-check fa-2x text-success mb-2"></i>
                    <h6 class="card-title">Active Users</h6>
                    <p class="card-text fs-5 fw-bold">@Model.Summary?.ActiveUsers</p>
                </div>
            </div>
        </div>
        <div class="col-md-2 col-6">
            <div class="card text-center shadow-sm border-warning">
                <div class="card-body">
                    <i class="fa-solid fa-tractor fa-2x text-warning mb-2"></i>
                    <h6 class="card-title">Farmers</h6>
                    <p class="card-text fs-5 fw-bold">@Model.Summary?.Farmers</p>
                </div>
            </div>
        </div>
        <div class="col-md-2 col-6">
            <div class="card text-center shadow-sm border-info">
                <div class="card-body">
                    <i class="fa-solid fa-tags fa-2x text-info mb-2"></i>
                    <h6 class="card-title">Categories</h6>
                    <p class="card-text fs-5 fw-bold">@Model.Summary?.Categories</p>
                </div>
            </div>
        </div>
        <div class="col-md-2 col-6">
            <div class="card text-center shadow-sm border-secondary">
                <div class="card-body">
                    <i class="fa-solid fa-seedling fa-2x text-secondary mb-2"></i>
                    <h6 class="card-title">Crops</h6>
                    <p class="card-text fs-5 fw-bold">@Model.Summary?.Crops</p>
                </div>
            </div>
        </div>
        <div class="col-md-2 col-6">
            <div class="card text-center shadow-sm border-dark">
                <div class="card-body">
                    <i class="fa-solid fa-cloud-sun-rain fa-2x text-dark mb-2"></i>
                    <h6 class="card-title">Weather Files</h6>
                    <p class="card-text fs-5 fw-bold">@Model.Summary?.WeatherFiles</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Farmers by Village Table -->
    <div class="mb-5">
        <h4 class="text-primary mb-3">Farmers by Village</h4>
        <div class="table-responsive shadow-sm rounded">
            <table class="table table-hover table-bordered align-middle mb-0">
                <thead class="table-dark">
                    <tr>
                        <th>Village</th>
                        <th>No. of Farmers</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.FarmersByVillage ?? new List<UHSB_Bagalkot.WebService.ViewModels.FarmersByVillageVM>())
                    {
                        <tr>
                            <td>@item.Village</td>
                            <td>@item.Count</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
     
</div>

<!-- LocalStorage Script to remember user -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
         // Display remembered user
         if (localStorage.getItem("UserName")) {
             $('#userNameDisplay').text(localStorage.getItem("UserName"));
             $('#phoneDisplay').text(localStorage.getItem("PhoneNumber"));
         }

         // Counter animation
         $('.counter').each(function () {
             var $this = $(this),
                 target = +$this.attr('data-target'),
                 count = 0;
             $({ countNum: count }).animate({ countNum: target }, {
                 duration: 2000, // animation duration in ms
                 easing: 'swing',
                 step: function () {
                     $this.text(Math.floor(this.countNum));
                 },
                 complete: function () {
                     $this.text(this.countNum);
                 }
             });
         });
     });
</script>
